#!/usr/bin/env node
"use strict";exports.id=819,exports.ids=[819],exports.modules={57819:(e,o,n)=>{n.r(o),n.d(o,{fromTokenFile:()=>s,fromWebToken:()=>t});var i=n(18112),r=n(79896);const t=e=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:o,roleSessionName:i,webIdentityToken:r,providerId:t,policyArns:s,policy:d,durationSeconds:l}=e;let{roleAssumerWithWebIdentity:c}=e;if(!c){const{getDefaultRoleAssumerWithWebIdentity:o}=await Promise.resolve().then(n.bind(n,15505));c=o({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:e.parentClientConfig},e.clientPlugins)}return c({RoleArn:o,RoleSessionName:i??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:r,ProviderId:t,PolicyArns:s,Policy:d,DurationSeconds:l})},s=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");const o=e?.webIdentityTokenFile??process.env.AWS_WEB_IDENTITY_TOKEN_FILE,n=e?.roleArn??process.env.AWS_ROLE_ARN,s=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!o||!n)throw new i.C1("Web identity configuration not specified",{logger:e.logger});return t({...e,webIdentityToken:(0,r.readFileSync)(o,{encoding:"ascii"}),roleArn:n,roleSessionName:s})()}}};
//# sourceMappingURL=819.main.js.map